WIKIDOT.modules.MailFormModule={};WIKIDOT.modules.MailFormModule.vars={};WIKIDOT.modules.MailFormModule.listeners={send:function(f,c){var b=$("mailform-"+c);var d=new Object();d.formdata=JSON.stringify(OZONE.utils.formToArray(b));d.action="wiki/MailFormAction";d.event="sendForm";d.formdef=$("mailformdef-"+c).innerHTML;OZONE.ajax.requestModule(null,d,WIKIDOT.modules.MailFormModule.callbacks.send);var a=new OZONE.dialogs.WaitBox();a.content="Sending the form...";a.show();WIKIDOT.modules.MailFormModule.vars.rand=c}};WIKIDOT.modules.MailFormModule.callbacks={send:function(a){var g=WIKIDOT.modules.MailFormModule.vars.rand;var b=$("mailform-"+g);var f=b.getElementsByTagName("tr");for(var e=0;e<f.length;e++){YAHOO.util.Dom.removeClass(f[e],"invalid-value-row")}if(a.status=="form_errors"){var j=a.errors;for(var c in j){var k=$("mailform-row-"+g+"-"+c);YAHOO.util.Dom.addClass(k,"invalid-value-row");var d=YAHOO.util.Dom.getElementsByClassName("field-error-message","div",k)[0];d.innerHTML=j[c]}OZONE.dialog.cleanAll();return}if(!WIKIDOT.utils.handleError(a)){return}var h=new OZONE.dialogs.SuccessBox();h.content="The form has been sent. Thank you!";h.show();if(a.successPage){setTimeout("window.location.href='/"+a.successPage+"'",500)}else{b.innerHTML=a.successMsg}}};