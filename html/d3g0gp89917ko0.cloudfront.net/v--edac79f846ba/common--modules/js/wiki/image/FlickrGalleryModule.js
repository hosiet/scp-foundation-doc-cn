WIKIDOT.modules.FlickrGalleryModules={};WIKIDOT.modules.FlickrGalleryModules.vars={};WIKIDOT.modules.FlickrGalleryModules.listeners={loadPage:function(d,a){var c=YAHOO.util.Event.getTarget(d);do{c=c.parentNode}while(c&&!YAHOO.util.Dom.hasClass(c,"flickr-gallery-box"));WIKIDOT.modules.FlickrGalleryModules.vars.destinationBox=c;var f=new Object();var g=YAHOO.util.Dom.getElementsByClassName("flickr-gallery-parameter","li",c);for(var b=0;b<g.length;b++){var e=g[b].innerHTML.split(":::");f[e[0].replace(/^ +/,"").replace(/ +$/,"")]=e[1].replace(/^ +/,"").replace(/ +$/,"")}f.pageNumber=a;f.contentOnly=true;OZONE.ajax.requestModule("wiki/image/FlickrGalleryModule",f,WIKIDOT.modules.FlickrGalleryModules.callbacks.loadPage)},showPhoto:function(h,b){YAHOO.util.Event.stopEvent(h);var g=new Object();g.photoId=b;OZONE.ajax.requestModule("wiki/image/FlickrGalleryViewPhotoModule",g,WIKIDOT.modules.FlickrGalleryModules.callbacks.showPhoto);var f=YAHOO.util.Event.getTarget(h);do{f=f.parentNode}while(f&&!$j(f).hasClass("flickr-gallery-box"));var j=YAHOO.util.Dom.getElementsByClassName("flickr-gallery-order","li",f);var a=new Array();var c=0;for(var d=0;d<j.length;d++){a.push(0+j[d].innerHTML);if(1*(j[d].innerHTML)==1*b){c=d}}WIKIDOT.modules.FlickrGalleryModules.vars.currentElement=c;WIKIDOT.modules.FlickrGalleryModules.vars.galleryList=a},showPreviousPhoto:function(b){var a=WIKIDOT.modules.FlickrGalleryModules.vars.currentElement;var c=WIKIDOT.modules.FlickrGalleryModules.vars.galleryList;if(a>0){WIKIDOT.modules.FlickrGalleryModules.listeners.showPhoto(b,c[a-1])}},showNextPhoto:function(b){var a=WIKIDOT.modules.FlickrGalleryModules.vars.currentElement;var c=WIKIDOT.modules.FlickrGalleryModules.vars.galleryList;if(a<c.length-1){WIKIDOT.modules.FlickrGalleryModules.listeners.showPhoto(b,c[a+1])}}};WIKIDOT.modules.FlickrGalleryModules.callbacks={loadPage:function(c){if(!WIKIDOT.utils.handleError(c)){return}var b=WIKIDOT.modules.FlickrGalleryModules.vars.destinationBox;$j(b.getElementsByTagName("div")[0]).html(c.body);var a=b.getElementsByTagName("img");OZONE.dialog.hovertip.makeTip(a,{style:{width:"auto"},noCursorHelp:true,delay:50})},showPhoto:function(d){if(!WIKIDOT.utils.handleError(d)){return}var g=YAHOO.util.Dom.getElementsByClassName("photowindow","div","odialog-container")[0];if(g){var b=d.body.replace('<div class="owindow photowindow" id="photowindow">',"");b=b.replace("</div><!-- end -->","");b=b.replace('<img class="flickrphoto"','<img class="flickrphoto" style="visibility:hidden"');$j(g).html(b);var f=YAHOO.util.Dom.getElementsByClassName("flickrphoto","img",g)[0];var c=new fx.Opacity(f,{duration:400});c.setOpacity(0);c.custom(0,1);OZONE.dialog.factory.boxcontainer().centerContent()}else{var a=new OZONE.dialogs.Dialog();a.content=d.body;a.clickOutsideToClose=true;a.smooth=true;a.show()}var e=WIKIDOT.modules.FlickrGalleryModules.vars.currentElement;var h=WIKIDOT.modules.FlickrGalleryModules.vars.galleryList;if(e==0){$("photo-nav-prev").style.visibility="hidden"}else{$("photo-nav-prev").style.visibility="visible"}if(e==h.length-1){$("photo-nav-next").style.visibility="hidden"}else{$("photo-nav-next").style.visibility="visible"}}};WIKIDOT.modules.FlickrGalleryModules.init=function(){OZONE.dom.onDomReady(function(){var c=YAHOO.util.Dom.getElementsByClassName("flickr-gallery-box","div");for(var b=0;b<c.length;b++){if(YAHOO.util.Dom.hasClass(c[b],"makeHoverTitles")){var a=c[b].getElementsByTagName("img");OZONE.dialog.hovertip.makeTip(a,{style:{width:"auto"},noCursorHelp:true,delay:50})}}},"dummy-ondomready-block")};WIKIDOT.modules.FlickrGalleryModules.init();