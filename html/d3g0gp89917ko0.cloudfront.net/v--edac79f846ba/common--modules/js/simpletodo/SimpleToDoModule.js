WIKIDOT.modules.SimpleToDoModule={};WIKIDOT.modules.SimpleToDoModule.callbacks={save:function(b){var a=JSON.stringify(b);var c={data:a};c.pageId=WIKIREQUEST.info.pageId;c.action="SimpleToDoAction";c.event="save";OZONE.ajax.requestModule(null,c,WIKIDOT.modules.SimpleToDoModule.callbacks.saveCallback)},saveCallback:function(a){if(!WIKIDOT.utils.handleError(a)){return}}};WIKIDOT.modules.SimpleToDoModule.listeners={clickCheckBoxToChangeState:function(f){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var b;var d=document;var a;if(!f){var f=window.event}if(f.target){a=f.target}else{if(f.srcElement){a=f.srcElement}}if(a.nodeType==3){a=a.parentNode}if(a.checked==true){b=true}else{b=false}var c=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(a,d);WIKIDOT.modules.SimpleToDoModule.callbacks.save(c)}else{alert("You do not have permissions to edit list.")}},clickTitleToEdit:function(f){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var c=document;var d;if(!f){var f=window.event}if(f.target){d=f.target}else{if(f.srcElement){d=f.srcElement}}if(d.nodeType==3){d=d.parentNode}YAHOO.util.Event.removeListener(d,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickTitleToEdit);var a=c.createElement("input");a.type="text";a.value=d.firstChild.nodeValue;a.oldValue=d.firstChild.nodeValue;YAHOO.util.Event.addListener(a,"blur",WIKIDOT.modules.SimpleToDoModule.listeners.onblurSaveTitle);var b=d.firstChild;YAHOO.util.Event.addListener(a,"keypress",WIKIDOT.modules.SimpleToDoModule.listeners.onKeyPressSaveTitle);YAHOO.util.Dom.addClass(a,"text");d.removeChild(b);d.appendChild(a);a.style.width="90%";a.style.textAlign="center";a.focus()}},onblurSaveTitle:function(h){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var f=document;var g;if(!h){var h=window.event}if(h.target){g=h.target}else{if(h.srcElement){g=h.srcElement}}if(g.nodeType==3){g=g.parentNode}YAHOO.util.Event.removeListener(g.parentNode,"blur",WIKIDOT.modules.SimpleToDoModule.listeners.onblurSaveTitle);YAHOO.util.Event.addListener(g.parentNode,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickTitleToEdit);if(g.nodeName=="INPUT"){g.value=g.value.replace(/^\s+/,"");g.value=g.value.replace(/\s+$/,"");var d=f.getElementById("simpletodo-data-title");var a=g.parentNode;if(g.oldValue!=g.value){if(g.value!=""){var b=f.createTextNode(g.value)}else{var b=f.createTextNode(d.innerHTML)}a.removeChild(g);a.appendChild(b);var c=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(a,f);WIKIDOT.modules.SimpleToDoModule.callbacks.save(c)}else{if(g.value!=""){var b=f.createTextNode(g.value)}else{var b=f.createTextNode(d.innerHTML)}a.removeChild(g);a.appendChild(b)}}}},clickToEditTask:function(g){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var f=document;if(!g){var g=window.event}if(g.target){var d=g.target}else{if(g.srcElement){var d=g.srcElement}}if(d.nodeName=="SPAN"){YAHOO.util.DragDropMgr.lock();var b=d.parentNode;var a=f.createElement("input");a.type="text";YAHOO.util.Event.addListener(a,"blur",WIKIDOT.modules.SimpleToDoModule.listeners.onblurSaveTask);a.value=d.firstChild.nodeValue;a.oldValue=d.firstChild.nodeValue;YAHOO.util.Dom.addClass(d.parentNode.parentNode.parentNode,"edit");var h=d.firstChild;var c=h.parentNode.offsetWidth;b.removeChild(d);b.appendChild(a);YAHOO.util.Dom.addClass(a,"text");YAHOO.util.Event.addListener(a,"keypress",WIKIDOT.modules.SimpleToDoModule.listeners.onKeyPressSaveTask);a.style.width=(Math.max(c,100))+"px";a.focus();var i=YAHOO.util.Dom.generateId(a,"tmp_hack");setTimeout("$('"+i+"').focus()",50)}}},onblurSaveTask:function(h){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var g=document;var b;if(!h){var h=window.event}if(h.target){b=h.target}else{if(h.srcElement){b=h.srcElement}}if(b.nodeType==3){b=b.parentNode}var j=b.parentNode;var d=j.getElementsByTagName("span");YAHOO.util.Dom.removeClass(b.parentNode.parentNode.parentNode,"edit");if(b.nodeName=="INPUT"){b.value=b.value.replace(/^\s+/,"");b.value=b.value.replace(/\s+$/,"");var a=g.getElementById("simpletodo-data-itemtext");var f=b.parentNode;if(b.oldValue!=b.value){if(b.value!=""){var c=g.createTextNode(b.value)}else{var c=g.createTextNode(a.innerHTML)}var i=g.createElement("span");i.appendChild(c);YAHOO.util.Dom.addClass(i,"text");f.removeChild(b);f.appendChild(i);var k=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(f,g);WIKIDOT.modules.SimpleToDoModule.callbacks.save(k)}else{if(b.value!=""){var c=g.createTextNode(b.value)}else{var c=g.createTextNode(a.innerHTML)}var i=g.createElement("span");i.appendChild(c);YAHOO.util.Dom.addClass(i,"text");f.removeChild(b);f.appendChild(i)}}YAHOO.util.DragDropMgr.unlock()}},clickToRemoveTask:function(g){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var f=document;var d;if(!g){var g=window.event}if(g.target){d=g.target}else{if(g.srcElement){d=g.srcElement}}if(d.nodeType==3){d=d.parentNode}var c=WIKIDOT.modules.SimpleToDoModule.utils.getDirectParentNodeByName("div",d);var a=c.parentNode;a.removeChild(c);var b=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(a,f);WIKIDOT.modules.SimpleToDoModule.callbacks.save(b)}},clickToAddTask:function(f,h){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var d=document;var c;if(!f){var f=window.event}if(f.target){c=f.target}else{if(f.srcElement){c=f.srcElement}}if(c.nodeType==3){c=c.parentNode}var b=WIKIDOT.modules.SimpleToDoModule.utils.createToDoItem(d);YAHOO.util.Dom.generateId(b,"simpletodo-task");var g=d.getElementById(h.toString());var a=YAHOO.util.Dom.getElementsByClassName("simpletodo-sub-box","div",g);a[0].appendChild(b);new WIKIDOT.modules.SimpleToDoModule.DD.DDList(b.id.toString())}},onKeyPressSaveTask:function(h){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){if(h.keyCode==13){var g=document;var b;if(!h){var h=window.event}if(h.target){b=h.target}else{if(h.srcElement){b=h.srcElement}}if(b.nodeType==3){b=b.parentNode}var j=b.parentNode;var d=j.getElementsByTagName("span");YAHOO.util.Dom.removeClass(b.parentNode.parentNode.parentNode,"edit");if(b.nodeName=="INPUT"){b.value=b.value.replace(/^\s+/,"");b.value=b.value.replace(/\s+$/,"");var a=g.getElementById("simpletodo-data-itemtext");var f=b.parentNode;if(b.oldValue!=b.value){if(b.value!=""){var c=g.createTextNode(b.value)}else{var c=g.createTextNode(a.innerHTML)}var i=g.createElement("span");i.appendChild(c);YAHOO.util.Dom.addClass(i,"text");f.removeChild(b);f.appendChild(i);var k=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(f,g);WIKIDOT.modules.SimpleToDoModule.callbacks.save(k)}else{if(b.value!=""){var c=g.createTextNode(b.value)}else{var c=g.createTextNode(a.innerHTML)}var i=g.createElement("span");i.appendChild(c);YAHOO.util.Dom.addClass(i,"text");f.removeChild(b);f.appendChild(i)}}YAHOO.util.DragDropMgr.unlock()}}},onKeyPressSaveTitle:function(h){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){if(h.keyCode==13){var f=document;var g;if(!h){var h=window.event}if(h.target){g=h.target}else{if(h.srcElement){g=h.srcElement}}if(g.nodeType==3){g=g.parentNode}YAHOO.util.Event.removeListener(g.parentNode,"blur",WIKIDOT.modules.SimpleToDoModule.listeners.onblurSaveTitle);YAHOO.util.Event.addListener(g.parentNode,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickTitleToEdit);if(g.nodeName=="INPUT"){g.value=g.value.replace(/^\s+/,"");g.value=g.value.replace(/\s+$/,"");var d=f.getElementById("simpletodo-data-title");var a=g.parentNode;if(g.oldValue!=g.value){if(g.value!=""){var b=f.createTextNode(g.value)}else{var b=f.createTextNode(d.innerHTML)}a.removeChild(g);a.appendChild(b);var c=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(a,f);WIKIDOT.modules.SimpleToDoModule.callbacks.save(c)}else{if(g.value!=""){var b=f.createTextNode(g.value)}else{var b=f.createTextNode(d.innerHTML)}a.removeChild(g);a.appendChild(b)}}}}},clickToEditLink:function(d){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var c=document;var i;if(!d){var d=window.event}if(d.target){i=d.target}else{if(d.srcElement){i=d.srcElement}}if(i.nodeType==3){i=i.parentNode}var j=i.parentNode.parentNode;var b=WIKIDOT.modules.SimpleToDoModule.utils.createLinkField(c);var a=j.getElementsByTagName("a");var f=b.getElementsByTagName("span");if(a[0].href.match(/^http/)){f[1].firstChild.value=a[0].href}j.appendChild(b);f=b.getElementsByTagName("span");var k=f[1].getElementsByTagName("input");k.item(0).focus();YAHOO.util.DragDropMgr.lock();var h=new YAHOO.util.XHRDataSource("/quickmodule.php");h.responseType=YAHOO.util.XHRDataSource.TYPE_JSON;h.responseSchema={resultsList:"pages",fields:["unix_name","title"]};var g=new YAHOO.widget.AutoComplete("link-page-name","link-page-name-list",h);g.generateRequest=function(e){return"?s="+WIKIREQUEST.info.siteId+"&module=PageLookupQModule&q="+e};g.formatResult=function(e,n){var m=e[1];var l=e[0];if(l!=null){return'<div style="font-size: 100%">'+l+'</div><div style="font-size: 85%;">('+m+")</div>"}else{return""}};g.minQueryLength=2;g.queryDelay=0.5}},onblurSaveLink:function(g){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){var f=document;var i;if(!g){var g=window.event}if(g.target){i=g.target}else{if(g.srcElement){i=g.srcElement}}if(i.nodeType==3){i=i.parentNode}var k=WIKIDOT.modules.SimpleToDoModule.utils.getDirectParentNodeByName("div",i);var c=WIKIDOT.modules.SimpleToDoModule.utils.getDirectParentNodeByName("div",k);var a=k.getElementsByTagName("span");var d=YAHOO.util.Dom.getElementsByClassName("follow-link","span",c);var h=d[0].getElementsByTagName("a");a[1].firstChild.value=a[1].firstChild.value.replace(/^\s+/,"");a[1].firstChild.value=a[1].firstChild.value.replace(/\s+$/,"");var b=a[1].firstChild.value.toString();if((b!="javascript:;")&&(b!="")){YAHOO.util.Dom.addClass(h[0].parentNode,"proper-link");h[0].href=b}else{YAHOO.util.Dom.removeClass(h[0].parentNode,"proper-link");h[0].href="javascript:;"}c.removeChild(k);YAHOO.util.DragDropMgr.unlock();var j=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(c,f);WIKIDOT.modules.SimpleToDoModule.callbacks.save(j)}},onKeyPressSaveLink:function(g){if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="true"){if(g.keyCode==13){var f=document;var i;if(!g){var g=window.event}if(g.target){i=g.target}else{if(g.srcElement){i=g.srcElement}}if(i.nodeType==3){i=i.parentNode}var k=WIKIDOT.modules.SimpleToDoModule.utils.getDirectParentNodeByName("div",i);var c=WIKIDOT.modules.SimpleToDoModule.utils.getDirectParentNodeByName("div",k);var a=k.getElementsByTagName("span");var d=YAHOO.util.Dom.getElementsByClassName("follow-link","span",c);var h=d[0].getElementsByTagName("a");a[1].firstChild.value=a[1].firstChild.value.replace(/^\s+/,"");a[1].firstChild.value=a[1].firstChild.value.replace(/\s+$/,"");var b=a[1].firstChild.value.toString();if((b!="javascript:;")&&(b!="")){YAHOO.util.Dom.addClass(h[0].parentNode,"proper-link");h[0].href=b}else{YAHOO.util.Dom.removeClass(h[0].parentNode,"proper-link");h[0].href="javascript:;"}c.removeChild(k);YAHOO.util.DragDropMgr.unlock();var j=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(c,f);WIKIDOT.modules.SimpleToDoModule.callbacks.save(j)}}}};WIKIDOT.modules.SimpleToDoModule.DD={};OZONE.dom.onDomReady(function(){var b={width:"300px",height:"200",left:"2%",top:"60%",right:"30em",bottom:"40%",fontSize:"120%",footerEnabled:true,logReaderEnabled:true,thresholdMax:100,thresholdMin:10,draggable:true,outputBuffer:100};var a=null;(function(){WIKIDOT.modules.SimpleToDoModule.utils.editPermission=document.getElementById("simpletodo-data-edit-permission");var l=YAHOO.util.Dom.getElementsByClassName("simpletodo-box");var c;var h;for(var g=0;g<l.length;g++){h=YAHOO.util.Dom.getElementsByClassName("title",null,l[g]);YAHOO.util.Event.addListener(h[0],"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickTitleToEdit);c=YAHOO.util.Dom.getElementsByClassName("task","div",l[g]);YAHOO.util.Dom.generateId(c,"simpletodo-task");for(var f=0;f<c.length;f++){var e=YAHOO.util.Dom.getElementsByClassName("checkbox","input",c[f]);var k=c[f].getElementsByTagName("span");var d=c[f].getElementsByTagName("a");YAHOO.util.Event.addListener(e[0],"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickCheckBoxToChangeState);YAHOO.util.Event.addListener(k[1],"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToEditTask);YAHOO.util.Event.addListener(d[2],"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToRemoveTask);YAHOO.util.Event.addListener(d[1],"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToEditLink)}}WIKIDOT.modules.SimpleToDoModule.utils.ieHoverFix("simpletodo-sub-box");if(WIKIDOT.modules.SimpleToDoModule.utils.editPermission.innerHTML=="false"){YAHOO.util.DragDropMgr.lock()}})();(function(){var d=YAHOO.util.Dom;var c=YAHOO.util.Event;var e=YAHOO.util.DragDropMgr;WIKIDOT.modules.SimpleToDoModule.DD.DDApp={init:function(){var k=YAHOO.util.Dom.getElementsByClassName("simpletodo-sub-box");var h,g;for(h=0;h<k.length;h=h+1){new YAHOO.util.DDTarget(""+k[h].id);var f=YAHOO.util.Dom.getElementsByClassName("task","div",k[h]);for(g=0;g<f.length;g++){new WIKIDOT.modules.SimpleToDoModule.DD.DDList(""+f[g].id)}}}};WIKIDOT.modules.SimpleToDoModule.DD.DDList=function(i,f,g){WIKIDOT.modules.SimpleToDoModule.DD.DDList.superclass.constructor.call(this,i,f,g);var h=this.getDragEl();d.setStyle(h,"opacity",0.67);this.goingUp=false;this.lastY=0};YAHOO.extend(WIKIDOT.modules.SimpleToDoModule.DD.DDList,YAHOO.util.DDProxy,{startDrag:function(g,k){var f=this.getDragEl();var j=this.getEl();WIKIDOT.modules.SimpleToDoModule.utils.oldDragElement=j;WIKIDOT.modules.SimpleToDoModule.utils.oldDragElementList=WIKIDOT.modules.SimpleToDoModule.utils.getParentElementOfSpecifiedClass("task","div",j,document);var i=d.getElementsByClassName("options","span",j);var h=d.getElementsByClassName("follow-link","span",j);d.setStyle(j,"visibility","hidden");d.setStyle(i[0],"visibility","hidden");d.setStyle(h[0],"visibility","hidden");f.innerHTML=j.innerHTML;d.setStyle(f,"color",d.getStyle(j,"color"));d.setStyle(f,"backgroundColor",d.getStyle(j,"backgroundColor"));d.setStyle(f,"border","2px solid gray")},endDrag:function(k){var g=this.getEl();var l=this.getDragEl();d.setStyle(l,"visibility","");var m=new YAHOO.util.Motion(l,{points:{to:d.getXY(g)}},0.2,YAHOO.util.Easing.easeOut);var h=l.id;var i=this.id;var j=d.getElementsByClassName("options","span",i);var f=d.getElementsByClassName("follow-link","span",i);WIKIDOT.modules.SimpleToDoModule.utils.newDragElementList=WIKIDOT.modules.SimpleToDoModule.utils.getParentElementOfSpecifiedClass("task","div",g,document);if(WIKIDOT.modules.SimpleToDoModule.utils.newDragElementList.id!=WIKIDOT.modules.SimpleToDoModule.utils.oldDragElementList.id){var n=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(WIKIDOT.modules.SimpleToDoModule.utils.oldDragElementList,document);WIKIDOT.modules.SimpleToDoModule.callbacks.save(n)}m.onComplete.subscribe(function(){d.setStyle(j[0],"visibility","");d.setStyle(f[0],"visibility","");d.setStyle(h,"visibility","hidden");d.setStyle(i,"visibility","")});m.animate();var n=WIKIDOT.modules.SimpleToDoModule.utils.getDataToSerialize(g,document);WIKIDOT.modules.SimpleToDoModule.callbacks.save(n)},onDragDrop:function(j,k){if(e.interactionInfo.drop.length===1){var i=e.interactionInfo.point;var h=e.interactionInfo.sourceRegion;if(!h.intersect(i)){var f=d.get(k);var g=e.getDDById(k);f.appendChild(this.getEl());g.isEmpty=false;e.refreshCache()}}},onDrag:function(f){var g=c.getPageY(f);if(g<this.lastY){this.goingUp=true}else{if(g>this.lastY){this.goingUp=false}}this.lastY=g},onDragOver:function(j,k){var h=this.getEl();var g=d.get(k);if(g.nodeName.toLowerCase()=="div"&&d.hasClass(g,"task")){var f=h.parentNode;var i=g.parentNode;if(this.goingUp){i.insertBefore(h,g)}else{i.insertBefore(h,g.nextSibling)}e.refreshCache()}}});c.onDOMReady(WIKIDOT.modules.SimpleToDoModule.DD.DDApp.init,WIKIDOT.modules.SimpleToDoModule.DD.DDApp,true)})()},"dummy-ondomready-block");WIKIDOT.modules.SimpleToDoModule.utils={newDragElement:undefined,oldDragElement:undefined,newDragElementList:undefined,oldDragElementList:undefined,linkCounter:0,editPermission:undefined,getDirectParentNodeByName:function(b,a){var c=a.parentNode;while(c&&(c.nodeName.toLowerCase()!=b.toLowerCase())){c=c.parentNode}return c},ieHoverFix:function(c){if(navigator.appName.indexOf("Microsoft")!=-1||navigator.appVersion.indexOf("6.")!=-1){var e=YAHOO.util.Dom.getElementsByClassName(c,"div");if(e==null){return}for(var b=0;b<e.length;b++){var d=YAHOO.util.Dom.getElementsByClassName("task","div",e[b]);for(var a=0;a<d.length;a++){YAHOO.util.Event.addListener(d[a],"mouseover",function(f){YAHOO.util.Dom.addClass(this,"iehover")});YAHOO.util.Event.addListener(d[a],"mouseout",function(f){YAHOO.util.Dom.removeClass(this,"iehover")})}}return}},createToDoItem:function(p){var j=p;var m=j.createElement("div");var e=j.createElement("span");var d=j.createElement("span");var c=j.createElement("span");var b=j.createElement("span");var a=j.createElement("span");var l=j.createElement("input");var o=j.getElementById("simpletodo-data-itemtext");var q=j.createTextNode(o.innerHTML);var i=j.createElement("a");var h=j.createElement("a");var g=j.createElement("a");var f=j.createElement("span");var n=j.createElement("span");var k=j.createElement("span");YAHOO.util.Dom.addClass(i,"icon2");YAHOO.util.Dom.addClass(h,"icon3");YAHOO.util.Dom.addClass(g,"icon1");YAHOO.util.Dom.addClass(m,"task");YAHOO.util.Dom.addClass(b,"options");YAHOO.util.Dom.addClass(l,"checkbox");YAHOO.util.Dom.addClass(e,"checkbox");YAHOO.util.Dom.addClass(c,"text");YAHOO.util.Dom.addClass(a,"follow-link");YAHOO.util.Event.addListener(i,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToRemoveTask);i.appendChild(f);h.appendChild(n);g.appendChild(k);f.innerHTML="Remove";n.innerHTML="Edit Link";k.innerHTML="Follow Link";i.href="javascript:;";h.href="javascript:;";g.href="javascript:;";l.setAttribute("type","checkbox");YAHOO.util.Event.addListener(d,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToEditTask);YAHOO.util.Event.addListener(h,"click",WIKIDOT.modules.SimpleToDoModule.listeners.clickToEditLink);YAHOO.util.Event.addListener(m,"mouseover",function(r){YAHOO.util.Dom.addClass(this,"iehover")});YAHOO.util.Event.addListener(m,"mouseout",function(r){YAHOO.util.Dom.removeClass(this,"iehover")});c.appendChild(q);d.appendChild(c);b.appendChild(h);b.appendChild(i);a.appendChild(g);e.appendChild(l);m.appendChild(e);m.appendChild(d);m.appendChild(a);m.appendChild(b);return m},createLinkField:function(h){var f=h;var a=f.createElement("div");var e=f.createElement("div");var g=f.createElement("span");var d=f.createElement("span");var c=f.createElement("span");var b=f.createElement("input");b.type="text";b.value="";b.name="linksList";b.id="link-page-name";e.id="link-page-name-list";YAHOO.util.Dom.addClass(e,"autocomplete-list");YAHOO.util.Dom.addClass(a,"add-link");YAHOO.util.Dom.addClass(a,"autocomplete-container");YAHOO.util.Dom.addClass(g,"text");YAHOO.util.Dom.addClass(d,"text");YAHOO.util.Dom.addClass(c,"text");YAHOO.util.Dom.addClass(b,"autocomplete-input");YAHOO.util.Dom.addClass(b,"text");YAHOO.util.Event.addListener(b,"blur",WIKIDOT.modules.SimpleToDoModule.listeners.onblurSaveLink);YAHOO.util.Event.addListener(b,"keypress",WIKIDOT.modules.SimpleToDoModule.listeners.onKeyPressSaveLink);d.appendChild(b);d.appendChild(e);a.appendChild(g);a.appendChild(d);a.appendChild(c);return a},getDataToSerialize:function(c,l){var a=c;var g=l;var b=new Array();while(a){if(a.nodeName=="DIV"&&YAHOO.util.Dom.hasClass(a,"simpletodo-box")){var n=YAHOO.util.Dom.getElementsByClassName("title","div",a);var m=YAHOO.util.Dom.getElementsByClassName("label","div",a);var d=YAHOO.util.Dom.getElementsByClassName("task","div",a);for(var e=0;e<d.length;e++){var h=d[e].getElementsByTagName("span");var j=h[1].firstChild.innerHTML;var f=h[3].firstChild.href;var k=WIKIDOT.modules.SimpleToDoModule.utils.getCheckBoxValue(h[0].firstChild);if(f!="javascript:;"&&f!=""){b[e]={text:j,link:f,checked:k}}else{b[e]={text:j,checked:k}}}return{title:n[0].innerHTML,data:b,label:m[0].innerHTML}}else{a=a.parentNode}}},getCheckBoxValue:function(a){if(a.nodeName.toLowerCase()=="input"){if(a.checked==true){return true}else{return false}}},getParentElementOfSpecifiedClass:function(a,d,b,c){var e=b.parentNode;while((e["class"]!=a)&&(e.nodeName.toLowerCase()!=d.toLowerCase())){e=e.parentNode}return e}};